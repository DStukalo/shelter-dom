const burger=document.querySelector(".header__burger"),modalMenu=document.querySelector(".modal-menu"),body=document.body,header=document.querySelector(".header"),logo=document.querySelector(".header__logo");burger.addEventListener("click",(function(e){modalMenu.classList.toggle("modal-menu_visible"),modalMenu.classList.toggle("modal-menu_hidden"),body.classList.toggle("body-overflow_hidden"),burger.classList.toggle("header__burger_rotate"),header.classList.toggle("header_rotate"),logo.classList.toggle("header__logo_rotate")})),modalMenu.addEventListener("click",(function(e){"modal-menu__wrapper"!=e.target.classList&&"header__navigation-link"!=e.target.classList&&"link-active-nav"!=e.target.classList||(modalMenu.classList.toggle("modal-menu_visible"),modalMenu.classList.toggle("modal-menu_hidden"),body.classList.toggle("body-overflow_hidden"),burger.classList.toggle("header__burger_rotate"),header.classList.toggle("header_rotate"),logo.classList.toggle("header__logo_rotate"))}));const url="https://raw.githubusercontent.com/rolling-scopes-school/tasks/master/tasks/markups/level-2/shelter/pets.json",slider=document.querySelector(".friends-content__slider"),cardList=document.querySelector(".friends-content__card-list");let petsArray=[],currentPets=[],indexOfSum=7,indexForFuncRandom=[],petsArrayWithoutCurrentPet=new Set,lastPets=[],promise=fetch(url).then((e=>e.json())).then((e=>(e.forEach((e=>{petsArray.push(e)})),petsArray))).then((e=>{sliderContent(e)})).catch((e=>{console.log(e)}));function sliderContent(e){cardList.innerHTML="";let t=createUniqIndex(),n="";n+=addCard(e[t[0]],1),n+=addCard(e[t[1]],2),n+=addCard(e[t[2]],3),cardList.insertAdjacentHTML("afterbegin",n),petsArray.forEach(((e,t)=>{petsArrayWithoutCurrentPet.add(e)})),lastPets=[],petsArrayWithoutCurrentPet.delete(e[t[0]]),petsArrayWithoutCurrentPet.delete(e[t[1]]),petsArrayWithoutCurrentPet.delete(e[t[2]]),petsArrayWithoutCurrentPet.forEach((e=>{lastPets.push(e)})),indexOfSum=petsArrayWithoutCurrentPet.size-1}function addCard(e,t){return`\n    <div class="friends-content__card card position__${t}">\n    <img                                    \n                                    src="img/friends/${e.name}.png"\n                                    alt=${e.name}\n                                    class="friends-content__card-image card__image"\n                                />\n                                <h4\n                                    class="friends-content__card-title card__title"\n                                >\n                                ${e.name}\n                                </h4>\n                                <button\n                                    class="friends-content__card-button button-primary_nonbg card__button"\n                                >\n                                    Learn more\n                                </button>\n  </div>\n    `}function randomizeIndex(){let e=indexOfSum;return Math.round(Math.random()*e)}function getThreeIndexes(){let e,t=randomizeIndex(),n=randomizeIndex();if(t==n)return getThreeIndexes();let r=randomizeIndex();return r==n||r==t?getThreeIndexes():(e=[t,n,r],currentPets=e,e)}function createUniqIndex(){let e;return currentPets&&(e=getThreeIndexes()),0==currentPets.length&&(e=getThreeIndexes()),e}slider.addEventListener("click",(function(e){const t=document.querySelector(".left-arrow"),n=document.querySelector(".right-arrow");e.target===t&&sliderContent(lastPets),e.target===n&&sliderContent(lastPets)})),slider.addEventListener("click",(function(e){if(e.target.closest(".friends-content__card")){let t;petsArray.forEach((n=>{n.name==e.target.closest(".friends-content__card").children[1].innerText&&(t=n)})),addContentToPopup(t)}}));const modalFriend=document.querySelector(".modal-friend"),modalFriendWrapper=document.querySelector(".modal-friend__wrapper");function addContentToPopup(e){modalFriendWrapper.innerHTML="",modalFriend.classList.toggle("modal-friend_visible"),body.classList.toggle("body-overflow_hidden");let t="";t+=closeButton(),t+=createPopup(e),modalFriendWrapper.insertAdjacentHTML("afterbegin",t),addHoverEffectAtBtnClose()}function addHoverEffectAtBtnClose(){const e=document.querySelector(".modal-friend__card");e.addEventListener("mouseleave",(function(e){document.querySelector(".modal-friend__close").classList.add("modal-friend__close-hover")})),e.addEventListener("mouseenter",(function(e){document.querySelector(".modal-friend__close").classList.remove("modal-friend__close-hover")}))}function closeButton(){return'\n    <div class="modal-friend__close"></div>'}function createPopup(e){return`\n    <div class="modal-friend__card">\n    <div class="modal-friend__picture">\n    <img src="img/friends/${e.name}.png" alt="${e.name}" class="modal-friend__img"/>\n    </div>\n    <div class="modal-friend__content">\n        <h3 class="modal-friend__title">${e.name}</h3>\n        <p class="modal-friend__subtitle">${e.type} - ${e.breed}</p>\n        <p class="modal-friend__desq">${e.description}</p>\n        <ul class="modal-friend__characteristic-list">\n            <li\n                class="modal-friend__characteristic-item"\n            ><b>Age</b> : ${e.age}</li>\n            <li\n                class="modal-friend__characteristic-item"\n            ><b>Inoculations</b> : ${e.inoculations}</li>\n            <li\n                class="modal-friend__characteristic-item"\n            ><b>Diseases</b>: ${e.diseases}</li>\n            <li\n                class="modal-friend__characteristic-item"\n            ><b>Parasites</b>: ${e.parasites}</li>\n        </ul>\n    </div>`}modalFriend.addEventListener("click",(function(e){(e.target.closest(".modal-friend__close")||"modal-friend modal-friend_visible"==e.target.classList)&&(modalFriend.classList.toggle("modal-friend_visible"),body.classList.toggle("body-overflow_hidden"))}));